(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{1017:function(e,a,t){"use strict";t.r(a);var r=t(6),n=t.n(r),c=t(48),o=t.n(c),l=(t(550),t(466)),s=t(467),u=t(507),i=t(468),m=t(508),E=t(1040),d=t(1038),f=t(353),h=t(509),g=t(130),p=t.n(g),b=t(212),k=t(248),w=t(24),v=t.n(w),P={userProfilePath:"/users/",localStorageTokenName:"RAFirebaseClientToken",localStorageProfileName:"RAFirebaseProfile",handleAuthStateChange:function(){var e=Object(b.a)(p.a.mark(function e(a,t){var r,n,c,o;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!a){e.next=21;break}return e.next=3,v.a.database().ref(t.userProfilePath+a.user.uid).once("value");case 3:if(r=e.sent,!(n=r.val())){e.next=15;break}return e.next=8,a.user.getIdToken();case 8:return c=e.sent,o={auth:a,profile:n,firebaseToken:c},localStorage.setItem(t.localStorageTokenName,c),localStorage.setItem(t.localStorageProfileName,JSON.stringify(n)),e.abrupt("return",o);case 15:throw v.a.auth().signOut(),localStorage.removeItem(t.localStorageTokenName),localStorage.removeItem(t.localStorageProfileName),new Error("sign_in_error");case 19:e.next=24;break;case 21:throw localStorage.removeItem(t.localStorageTokenName),localStorage.removeItem(t.localStorageProfileName),new Error("sign_in_error");case 24:case"end":return e.stop()}},e,this)}));return function(a,t){return e.apply(this,arguments)}}()},S=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e=Object(h.a)({},P,e);return function(){var a=Object(b.a)(p.a.mark(function a(t,r){var n,c,o,l;return p.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(t!==k.e){a.next=3;break}return e.handleAuthStateChange(null,e).catch(function(){}),a.abrupt("return",v.a.auth().signOut());case 3:if(!v.a.auth().currentUser){a.next=6;break}return a.next=6,v.a.auth().currentUser.reload();case 6:if(t!==k.a){a.next=12;break}return a.next=9,new Promise(function(e){v.a.auth().onAuthStateChanged(e)});case 9:if(v.a.auth().currentUser){a.next=11;break}throw new Error("sign_in_error");case 11:return a.abrupt("return",!0);case 12:if(t!==k.d){a.next=20;break}if(n=r.username,c=r.password,o=r.alreadySignedIn,(l=v.a.auth().currentUser)&&o){a.next=19;break}return a.next=18,v.a.auth().signInWithEmailAndPassword(n,c);case 18:l=a.sent;case 19:return a.abrupt("return",e.handleAuthStateChange(l,e));case 20:return a.abrupt("return",!1);case 21:case"end":return a.stop()}},a,this)}));return function(e,t){return a.apply(this,arguments)}}()},O=t(262),x=t.n(O),y=t(170),j=t(1029),I=t(1041),A=t(1042),N=t(1049),F=t(1032),L=t(1033),T=t(1019),C=t(1046),R=t(1035),_=t(1048),z=t(1047),J=t(1043),B=t(1045),U=function(e){var a=Object(y.unparse)({data:e,fields:["name","username","email"]});Object(j.a)(a,"posts")},D=function(e){try{var a=localStorage.getItem("RAFirebaseProfile"),t=JSON.parse(a);return n.a.createElement(I.a,Object.assign({title:"All users",exporter:U},e),n.a.createElement(A.a,null,n.a.createElement(N.a,{source:"name"}),n.a.createElement(N.a,{source:"username"}),n.a.createElement(N.a,{source:"email"}),t&&t.isAdmin?n.a.createElement(F.a,null):null,n.a.createElement(L.a,null)))}catch(r){}},K={zIndex:2,display:"inline-block",float:"right"},W=function(e){e.permissions;var a=e.basePath,t=e.data,c=e.resource,o=localStorage.getItem("RAFirebaseProfile"),l=JSON.parse(o);return n.a.createElement(x.a,{style:K},l&&l.isAdmin&&n.a.createElement(r.Fragment,null,n.a.createElement(F.a,{basePath:a,record:t}),n.a.createElement(T.a,{basePath:a,record:t,resource:c})))},V=function(e){return n.a.createElement(C.a,Object.assign({actions:n.a.createElement(W,null)},e),n.a.createElement(R.a,null,n.a.createElement(N.a,{source:"name"}),n.a.createElement(N.a,{source:"username"}),n.a.createElement(N.a,{source:"email"})))},Y=function(e){return n.a.createElement(_.a,e,n.a.createElement(z.a,null,n.a.createElement(J.a,{source:"name"}),n.a.createElement(J.a,{source:"username"}),n.a.createElement(J.a,{source:"email"})))},q=function(e){return n.a.createElement(B.a,e,n.a.createElement(z.a,null,n.a.createElement(J.a,{source:"name"}),n.a.createElement(J.a,{source:"username"}),n.a.createElement(J.a,{source:"email"})))},G=t(482),$=t(1018);function H(){return(H=Object(b.a)(p.a.mark(function e(a){return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(e){v.a.database().ref("caleg").orderByChild("nik").equalTo(a).on("value",function(a){e(a.val())})}));case 1:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}var M=function(e){return e.nik?function(e){return H.apply(this,arguments)}(e.nik).then(function(e){if(null!==e)throw{nik:"NIK can not be same"}}):Promise.resolve()},Q=function(e){var a=Object(y.unparse)({data:e,fields:["nameLengkap","nik","desa","rt","rw","tps","kecamatan","koordinator"]});Object(j.a)(a,"daftar_caleg")},X=function(e){try{var a=localStorage.getItem("RAFirebaseProfile"),t=JSON.parse(a);return n.a.createElement(I.a,Object.assign({title:"All caleg",exporter:Q},e),n.a.createElement(A.a,null,n.a.createElement(N.a,{source:"nameLengkap"}),n.a.createElement(N.a,{source:"nik"}),n.a.createElement(N.a,{source:"desa"}),n.a.createElement(N.a,{source:"rt"}),n.a.createElement(N.a,{source:"rw"}),n.a.createElement(N.a,{source:"tps"}),n.a.createElement(N.a,{source:"kecamatan"}),n.a.createElement(N.a,{source:"koordinator"}),t&&t.isAdmin?n.a.createElement(F.a,null):null,n.a.createElement(L.a,null)))}catch(r){}},Z={zIndex:2,display:"inline-block",float:"right"},ee=function(e){var a=e.basePath,t=e.data,c=e.resource,o=localStorage.getItem("RAFirebaseProfile"),l=JSON.parse(o);return n.a.createElement(x.a,{style:Z},l&&l.isAdmin&&n.a.createElement(r.Fragment,null,n.a.createElement(F.a,{basePath:a,record:t}),n.a.createElement(T.a,{basePath:a,record:t,resource:c})))},ae=function(e){return n.a.createElement(C.a,Object.assign({actions:n.a.createElement(ee,null)},e),n.a.createElement(R.a,null,n.a.createElement(N.a,{source:"nameLengkap"}),n.a.createElement(N.a,{source:"nik"}),n.a.createElement(N.a,{source:"desa"}),n.a.createElement(N.a,{source:"rt"}),n.a.createElement(N.a,{source:"rw"}),n.a.createElement(N.a,{source:"tps"}),n.a.createElement(N.a,{source:"kecamatan"}),n.a.createElement(N.a,{source:"koordinator"})))},te=function(e){return console.log(e),n.a.createElement(G.a,e,n.a.createElement($.a,{disabled:e.invalid}))},re=function(e){return n.a.createElement(_.a,e,n.a.createElement(z.a,{toolbar:n.a.createElement(te,null),asyncValidate:M},n.a.createElement(J.a,{source:"nameLengkap"}),n.a.createElement(J.a,{source:"nik"}),n.a.createElement(J.a,{source:"desa"}),n.a.createElement(J.a,{source:"rt"}),n.a.createElement(J.a,{source:"rw"}),n.a.createElement(J.a,{source:"tps"}),n.a.createElement(J.a,{source:"kecamatan"}),n.a.createElement(J.a,{source:"koordinator"})))},ne=function(e){return n.a.createElement(B.a,e,n.a.createElement(z.a,null,n.a.createElement(J.a,{source:"nameLengkap"}),n.a.createElement(J.a,{source:"nik"}),n.a.createElement(J.a,{source:"desa"}),n.a.createElement(J.a,{source:"rt"}),n.a.createElement(J.a,{source:"rw"}),n.a.createElement(J.a,{source:"tps"}),n.a.createElement(J.a,{source:"kecamatan"}),n.a.createElement(J.a,{source:"koordinator"})))},ce={userProfilePath:"/users/"},oe=Object(f.b)(Object(f.a)({apiKey:"AIzaSyDyTBLLk2DC1GYovd_nmxYKF1Lkl83P7V0",authDomain:"hazel-delight-146613.firebaseapp.com",databaseURL:"https://hazel-delight-146613.firebaseio.com",projectId:"hazel-delight-146613",storageBucket:"hazel-delight-146613.appspot.com",messagingSenderId:"419611045372"},{trackedResources:[{name:"caleg",isPublic:!0},{name:"users",isPublic:!0}]})),le=function(e){function a(){return Object(l.a)(this,a),Object(u.a)(this,Object(i.a)(a).apply(this,arguments))}return Object(m.a)(a,e),Object(s.a)(a,[{key:"render",value:function(){return n.a.createElement(E.a,{dataProvider:oe,authProvider:S(ce)},n.a.createElement(d.a,{name:"users",show:V,list:D,edit:q,create:Y}),n.a.createElement(d.a,{name:"caleg",show:ae,list:X,edit:ne,create:re}))}}]),a}(r.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(n.a.createElement(le,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},545:function(e,a,t){e.exports=t(1017)},550:function(e,a,t){}},[[545,1,2]]]);
//# sourceMappingURL=main.fee57542.chunk.js.map