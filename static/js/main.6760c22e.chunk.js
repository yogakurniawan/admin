(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{1018:function(e,a,t){"use strict";t.r(a);var r=t(9),n=t.n(r),c=t(48),o=t.n(c),l=(t(551),t(465)),s=t(466),u=t(507),i=t(467),m=t(510),f=t(1041),d=t(1039),h=t(352),p=t(509),E=t(130),g=t.n(E),b=t(211),k=t(247),w=t(24),v=t.n(w),S={userProfilePath:"/users/",localStorageTokenName:"RAFirebaseClientToken",localStorageProfileName:"RAFirebaseProfile",handleAuthStateChange:function(){var e=Object(b.a)(g.a.mark(function e(a,t){var r,n,c,o;return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!a){e.next=21;break}return e.next=3,v.a.database().ref(t.userProfilePath+a.user.uid).once("value");case 3:if(r=e.sent,!(n=r.val())){e.next=15;break}return e.next=8,a.user.getIdToken();case 8:return c=e.sent,o={auth:a,profile:n,firebaseToken:c},localStorage.setItem(t.localStorageTokenName,c),localStorage.setItem(t.localStorageProfileName,JSON.stringify(n)),e.abrupt("return",o);case 15:throw v.a.auth().signOut(),localStorage.removeItem(t.localStorageTokenName),localStorage.removeItem(t.localStorageProfileName),new Error("sign_in_error");case 19:e.next=24;break;case 21:throw localStorage.removeItem(t.localStorageTokenName),localStorage.removeItem(t.localStorageProfileName),new Error("sign_in_error");case 24:case"end":return e.stop()}},e,this)}));return function(a,t){return e.apply(this,arguments)}}()},P=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e=Object(p.a)({},S,e);return function(){var a=Object(b.a)(g.a.mark(function a(t,r){var n,c,o,l;return g.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(t!==k.e){a.next=3;break}return e.handleAuthStateChange(null,e).catch(function(){}),a.abrupt("return",v.a.auth().signOut());case 3:if(!v.a.auth().currentUser){a.next=6;break}return a.next=6,v.a.auth().currentUser.reload();case 6:if(t!==k.a){a.next=12;break}return a.next=9,new Promise(function(e){v.a.auth().onAuthStateChanged(e)});case 9:if(v.a.auth().currentUser){a.next=11;break}throw new Error("sign_in_error");case 11:return a.abrupt("return",!0);case 12:if(t!==k.d){a.next=20;break}if(n=r.username,c=r.password,o=r.alreadySignedIn,(l=v.a.auth().currentUser)&&o){a.next=19;break}return a.next=18,v.a.auth().signInWithEmailAndPassword(n,c);case 18:l=a.sent;case 19:return a.abrupt("return",e.handleAuthStateChange(l,e));case 20:return a.abrupt("return",!1);case 21:case"end":return a.stop()}},a,this)}));return function(e,t){return a.apply(this,arguments)}}()},O=t(481),x=t.n(O),j=t(248),I=t(1030),y=t(508),A=t(1042),N=t(1043),C=t(1049),_=t(1033),T=t(1034),J=t(1020),R=t(1048),U=t(1036),F=t(482),L=t(1019),B=t(1050),K=t(1047),W=t(1044),z=t(1046);function q(){return(q=Object(b.a)(g.a.mark(function e(a){return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(e){v.a.database().ref("caleg").orderByChild("nik").equalTo(a).on("value",function(a){e(a.val())})}));case 1:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}var Q=function(e){return e.nik?function(e){return q.apply(this,arguments)}(e.nik).then(function(e){if(null!==e)throw{nik:"NIK can not be same"}}):Promise.resolve()},V=function(e){var a=Object(j.unparse)({data:e,fields:["nameLengkap","nik","desa","rt","rw","tps","kecamatan","koordinator"]});Object(I.a)(a,"daftar_caleg")},Y=function(e){var a=localStorage.getItem("RAFirebaseProfile"),t=JSON.parse(a);return t&&t.isAdmin?n.a.createElement(y.a,e):n.a.createElement("div",null)},D=function(e){try{var a=localStorage.getItem("RAFirebaseProfile"),t=JSON.parse(a);return n.a.createElement(A.a,Object.assign({title:"All caleg",bulkActionButtons:n.a.createElement(Y,null),exporter:V},e),n.a.createElement(N.a,null,n.a.createElement(C.a,{source:"nameLengkap"}),n.a.createElement(C.a,{source:"nik"}),n.a.createElement(C.a,{source:"desa"}),n.a.createElement(C.a,{source:"rt"}),n.a.createElement(C.a,{source:"rw"}),n.a.createElement(C.a,{source:"tps"}),n.a.createElement(C.a,{source:"kecamatan"}),n.a.createElement(C.a,{source:"koordinator"}),t&&t.isAdmin?n.a.createElement(_.a,null):null,n.a.createElement(T.a,null)))}catch(r){}},X={zIndex:2,display:"inline-block",float:"right"},$=function(e){var a=e.basePath,t=e.data,c=e.resource,o=localStorage.getItem("RAFirebaseProfile"),l=JSON.parse(o);return n.a.createElement(x.a,{style:X},l&&l.isAdmin&&n.a.createElement(r.Fragment,null,n.a.createElement(_.a,{basePath:a,record:t}),n.a.createElement(J.a,{basePath:a,record:t,resource:c})))},G=function(e){return n.a.createElement(R.a,Object.assign({actions:n.a.createElement($,null)},e),n.a.createElement(U.a,null,n.a.createElement(C.a,{source:"nameLengkap"}),n.a.createElement(C.a,{source:"nik"}),n.a.createElement(C.a,{source:"desa"}),n.a.createElement(C.a,{source:"rt"}),n.a.createElement(C.a,{source:"rw"}),n.a.createElement(C.a,{source:"tps"}),n.a.createElement(C.a,{source:"kecamatan"}),n.a.createElement(C.a,{source:"koordinator"})))},H=function(e){return console.log(e),n.a.createElement(F.a,e,n.a.createElement(L.a,{disabled:e.invalid}))},M=function(e){return n.a.createElement(B.a,e,n.a.createElement(K.a,{toolbar:n.a.createElement(H,null),asyncValidate:Q},n.a.createElement(W.a,{source:"nameLengkap"}),n.a.createElement(W.a,{source:"nik"}),n.a.createElement(W.a,{source:"desa"}),n.a.createElement(W.a,{source:"rt"}),n.a.createElement(W.a,{source:"rw"}),n.a.createElement(W.a,{source:"tps"}),n.a.createElement(W.a,{source:"kecamatan"}),n.a.createElement(W.a,{source:"koordinator"})))},Z=function(e){return n.a.createElement(z.a,e,n.a.createElement(K.a,null,n.a.createElement(W.a,{source:"nameLengkap"}),n.a.createElement(W.a,{source:"nik"}),n.a.createElement(W.a,{source:"desa"}),n.a.createElement(W.a,{source:"rt"}),n.a.createElement(W.a,{source:"rw"}),n.a.createElement(W.a,{source:"tps"}),n.a.createElement(W.a,{source:"kecamatan"}),n.a.createElement(W.a,{source:"koordinator"})))},ee={userProfilePath:"/users/"},ae=Object(h.b)(Object(h.a)({apiKey:"AIzaSyCV0hW81oUY1aYK4CKqsgjUJ7zj_uj_QXQ",authDomain:"calonpemilih-836e5.firebaseapp.com",databaseURL:"https://calonpemilih-836e5.firebaseio.com",projectId:"calonpemilih-836e5",storageBucket:"calonpemilih-836e5.appspot.com",messagingSenderId:"797809077654"},{trackedResources:[{name:"caleg",isPublic:!0},{name:"users",isPublic:!0}]})),te=function(e){function a(){return Object(l.a)(this,a),Object(u.a)(this,Object(i.a)(a).apply(this,arguments))}return Object(m.a)(a,e),Object(s.a)(a,[{key:"render",value:function(){return n.a.createElement(f.a,{dataProvider:ae,authProvider:P(ee)},n.a.createElement(d.a,{name:"caleg",show:G,list:D,edit:Z,create:M}))}}]),a}(r.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(n.a.createElement(te,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},546:function(e,a,t){e.exports=t(1018)},551:function(e,a,t){}},[[546,1,2]]]);
//# sourceMappingURL=main.6760c22e.chunk.js.map