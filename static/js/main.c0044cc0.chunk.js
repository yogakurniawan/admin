(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{1017:function(e,a,t){"use strict";t.r(a);var r=t(11),n=t.n(r),c=t(48),o=t.n(c),l=(t(550),t(465)),s=t(466),u=t(507),i=t(467),m=t(508),h=t(1040),f=t(1038),d=t(352),p=t(509),E=t(130),g=t.n(E),b=t(211),k=t(247),w=t(24),v=t.n(w),S={userProfilePath:"/users/",localStorageTokenName:"RAFirebaseClientToken",localStorageProfileName:"RAFirebaseProfile",handleAuthStateChange:function(){var e=Object(b.a)(g.a.mark(function e(a,t){var r,n,c,o;return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!a){e.next=21;break}return e.next=3,v.a.database().ref(t.userProfilePath+a.user.uid).once("value");case 3:if(r=e.sent,!(n=r.val())){e.next=15;break}return e.next=8,a.user.getIdToken();case 8:return c=e.sent,o={auth:a,profile:n,firebaseToken:c},localStorage.setItem(t.localStorageTokenName,c),localStorage.setItem(t.localStorageProfileName,JSON.stringify(n)),e.abrupt("return",o);case 15:throw v.a.auth().signOut(),localStorage.removeItem(t.localStorageTokenName),localStorage.removeItem(t.localStorageProfileName),new Error("sign_in_error");case 19:e.next=24;break;case 21:throw localStorage.removeItem(t.localStorageTokenName),localStorage.removeItem(t.localStorageProfileName),new Error("sign_in_error");case 24:case"end":return e.stop()}},e,this)}));return function(a,t){return e.apply(this,arguments)}}()},P=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e=Object(p.a)({},S,e);return function(){var a=Object(b.a)(g.a.mark(function a(t,r){var n,c,o,l;return g.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(t!==k.e){a.next=3;break}return e.handleAuthStateChange(null,e).catch(function(){}),a.abrupt("return",v.a.auth().signOut());case 3:if(!v.a.auth().currentUser){a.next=6;break}return a.next=6,v.a.auth().currentUser.reload();case 6:if(t!==k.a){a.next=12;break}return a.next=9,new Promise(function(e){v.a.auth().onAuthStateChanged(e)});case 9:if(v.a.auth().currentUser){a.next=11;break}throw new Error("sign_in_error");case 11:return a.abrupt("return",!0);case 12:if(t!==k.d){a.next=20;break}if(n=r.username,c=r.password,o=r.alreadySignedIn,(l=v.a.auth().currentUser)&&o){a.next=19;break}return a.next=18,v.a.auth().signInWithEmailAndPassword(n,c);case 18:l=a.sent;case 19:return a.abrupt("return",e.handleAuthStateChange(l,e));case 20:return a.abrupt("return",!1);case 21:case"end":return a.stop()}},a,this)}));return function(e,t){return a.apply(this,arguments)}}()},x=t(481),O=t.n(x),j=t(248),y=t(1029),I=t(1041),A=t(1042),N=t(1049),C=t(1032),_=t(1033),T=t(1020),U=t(1046),J=t(1035),L=t(482),R=t(1018),F=t(1048),B=t(1045),K=t(1043),W=t(1047);function z(){return(z=Object(b.a)(g.a.mark(function e(a){return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(e){v.a.database().ref("caleg").orderByChild("nik").equalTo(a).on("value",function(a){e(a.val())})}));case 1:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}var q=function(e){return e.nik?function(e){return z.apply(this,arguments)}(e.nik).then(function(e){if(null!==e)throw{nik:"NIK can not be same"}}):Promise.resolve()},Q=function(e){var a=Object(j.unparse)({data:e,fields:["nameLengkap","nik","desa","rt","rw","tps","kecamatan","koordinator"]});Object(y.a)(a,"daftar_caleg")},V=function(e){try{var a=localStorage.getItem("RAFirebaseProfile"),t=JSON.parse(a);return n.a.createElement(I.a,Object.assign({title:"All caleg",exporter:Q},e),n.a.createElement(A.a,null,n.a.createElement(N.a,{source:"nameLengkap"}),n.a.createElement(N.a,{source:"nik"}),n.a.createElement(N.a,{source:"desa"}),n.a.createElement(N.a,{source:"rt"}),n.a.createElement(N.a,{source:"rw"}),n.a.createElement(N.a,{source:"tps"}),n.a.createElement(N.a,{source:"kecamatan"}),n.a.createElement(N.a,{source:"koordinator"}),t&&t.isAdmin?n.a.createElement(C.a,null):null,n.a.createElement(_.a,null)))}catch(r){}},Y={zIndex:2,display:"inline-block",float:"right"},D=function(e){var a=e.basePath,t=e.data,c=e.resource,o=localStorage.getItem("RAFirebaseProfile"),l=JSON.parse(o);return n.a.createElement(O.a,{style:Y},l&&l.isAdmin&&n.a.createElement(r.Fragment,null,n.a.createElement(C.a,{basePath:a,record:t}),n.a.createElement(T.a,{basePath:a,record:t,resource:c})))},X=function(e){return n.a.createElement(U.a,Object.assign({actions:n.a.createElement(D,null)},e),n.a.createElement(J.a,null,n.a.createElement(N.a,{source:"nameLengkap"}),n.a.createElement(N.a,{source:"nik"}),n.a.createElement(N.a,{source:"desa"}),n.a.createElement(N.a,{source:"rt"}),n.a.createElement(N.a,{source:"rw"}),n.a.createElement(N.a,{source:"tps"}),n.a.createElement(N.a,{source:"kecamatan"}),n.a.createElement(N.a,{source:"koordinator"})))},$=function(e){return console.log(e),n.a.createElement(L.a,e,n.a.createElement(R.a,{disabled:e.invalid}))},G=function(e){return n.a.createElement(F.a,e,n.a.createElement(B.a,{toolbar:n.a.createElement($,null),asyncValidate:q},n.a.createElement(K.a,{source:"nameLengkap"}),n.a.createElement(K.a,{source:"nik"}),n.a.createElement(K.a,{source:"desa"}),n.a.createElement(K.a,{source:"rt"}),n.a.createElement(K.a,{source:"rw"}),n.a.createElement(K.a,{source:"tps"}),n.a.createElement(K.a,{source:"kecamatan"}),n.a.createElement(K.a,{source:"koordinator"})))},H=function(e){return n.a.createElement(W.a,e,n.a.createElement(B.a,null,n.a.createElement(K.a,{source:"nameLengkap"}),n.a.createElement(K.a,{source:"nik"}),n.a.createElement(K.a,{source:"desa"}),n.a.createElement(K.a,{source:"rt"}),n.a.createElement(K.a,{source:"rw"}),n.a.createElement(K.a,{source:"tps"}),n.a.createElement(K.a,{source:"kecamatan"}),n.a.createElement(K.a,{source:"koordinator"})))},M={userProfilePath:"/users/"},Z=Object(d.b)(Object(d.a)({apiKey:"AIzaSyCV0hW81oUY1aYK4CKqsgjUJ7zj_uj_QXQ",authDomain:"calonpemilih-836e5.firebaseapp.com",databaseURL:"https://calonpemilih-836e5.firebaseio.com",projectId:"calonpemilih-836e5",storageBucket:"calonpemilih-836e5.appspot.com",messagingSenderId:"797809077654"},{trackedResources:[{name:"caleg",isPublic:!0},{name:"users",isPublic:!0}]})),ee=function(e){function a(){return Object(l.a)(this,a),Object(u.a)(this,Object(i.a)(a).apply(this,arguments))}return Object(m.a)(a,e),Object(s.a)(a,[{key:"render",value:function(){return n.a.createElement(h.a,{dataProvider:Z,authProvider:P(M)},n.a.createElement(f.a,{name:"caleg",show:X,list:V,edit:H,create:G}))}}]),a}(r.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(n.a.createElement(ee,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},545:function(e,a,t){e.exports=t(1017)},550:function(e,a,t){}},[[545,1,2]]]);
//# sourceMappingURL=main.c0044cc0.chunk.js.map